<?xml version="1.0" encoding="utf-8"?>
<Defs>
    <XmlExtensions.PatchDef Name="carnap2TPatchesModPatch" Abstract="True">
        <parameters>
            <li>key</li><!-- key -->
            <li>mod</li><!-- required mods -->
            <li>tab</li><!-- tab - Fixes Tweaks Balancing Settings-->
            <li>label</li><!-- label -->
            <li>description</li><!-- description -->
            <li>tooltip</li><!-- tooltip -->
            <li>default</li><!-- ENABLED/DISABLED -->
        </parameters>
        <apply>
            <!-- checks if the mod is active -->
            <Operation Class="PatchOperationFindMod">
                <mods>
                    <li>{mod}</li>
                </mods>
                <match Class="PatchOperationSequence">
                    <operations>
                        <!-- mod is active, adds the setting to the top of settings list -->
                        <li Class="PatchOperationAdd">
                            <order>Prepend</order>
                            <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="{tab}"]/settings</xpath>
                            <value>
                                <li Class="XmlExtensions.Setting.Gap">
                                    <spacing>1</spacing>
                                </li>
                                <li Class="XmlExtensions.Setting.SplitColumns">
                                    <gapSize>6</gapSize>
                                    <drawLine>false</drawLine>
                                    <splits>
                                        <li>0.5</li>
                                    </splits>
                                    <settings>
                                        <!-- title -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(200,200,255)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Text">
                                                <text>{label}</text>
                                            </li>
                                        </li>
                                        <!-- checkbox -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.Checkbox">
                                                <key>{key}</key>
                                                <!-- <label>{label}</label> -->
                                                <tooltip>{tooltip}</tooltip>
                                            </li>
                                        </li>
                                    </settings>
                                </li>
                                <li Class="XmlExtensions.Setting.Gap">
                                    <spacing>-4</spacing>
                                </li>
                                <li Class="XmlExtensions.Setting.SplitColumns">
                                    <gapSize>3</gapSize>
                                    <drawLine>false</drawLine>
                                    <splits>
                                        <li>0.11</li>
                                        <li>0.8</li>
                                    </splits>
                                    <settings>
                                        <!-- mod -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(155,225,155)</color>
                                            </li>
                                            
                                            <li Class="XmlExtensions.Setting.Text">
                                                <font>Tiny</font>
                                                <anchor>Left</anchor>
                                                <text>{mod}</text>
                                            </li>
                                        </li>
                                        <!-- description -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(235,235,235)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Text">
                                                <!-- <font>Tiny</font> -->
                                                <text>{description}</text>
                                            </li>
                                        </li>
                                        <!-- default -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(155,155,155)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Text">
                                                <font>Tiny</font>
                                                <anchor>Right</anchor>
                                                <text>default: {default}</text>
                                            </li>
                                        </li>
                                    </settings>
                                </li>
                                <li Class="XmlExtensions.Setting.SetColor">
                                    <color>(80,80,80)</color>
                                </li>
                                <li Class="XmlExtensions.Setting.GapLine">
                                    <spacing>-6</spacing>
                                </li>
                                <li Class="XmlExtensions.Setting.Gap">
                                    <spacing>12</spacing>
                                </li>
                                <li Class="XmlExtensions.Setting.SetColor">
                                    <color>(255,255,255)</color>
                                </li>
                            </value>
                        </li>
                        <!-- adds the active mod to the log tab if it isn't already there -->
                        <li Class="PatchOperationConditional">
                            <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="Log"]/settings/li[text="mod: {mod}"]</xpath>
                            <nomatch Class="PatchOperationAdd">
                                <order>Append</order>
                                <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="Log"]/settings</xpath>
                                <value>
                                    <li Class="XmlExtensions.Setting.Text">
                                        <font>Tiny</font>
                                        <text>mod: {mod}</text>
                                    </li>
                                </value>
                            </nomatch>
                        </li>
                    </operations>
                </match>
                <!-- mod isn't active, setting is greyed out and added to the bottom of settings list -->
                <nomatch Class="PatchOperationSequence">
                    <operations>
                        <li Class="PatchOperationAdd">
                            <order>Append</order>
                            <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="{tab}"]/settings</xpath>
                            <value>
                                <li Class="XmlExtensions.Setting.Gap">
                                    <spacing>1</spacing>
                                </li>
                                <li Class="XmlExtensions.Setting.SplitColumns">
                                    <gapSize>6</gapSize>
                                    <drawLine>false</drawLine>
                                    <splits>
                                        <li>0.5</li>
                                    </splits>
                                    <settings>
                                        <!-- title -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(100,100,155)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Text">
                                                <text>{label}</text>
                                            </li>
                                        </li>
                                        <!-- checkbox -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(100,100,100)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Checkbox">
                                                <key>{key}</key>
                                                <!-- <label>{label}</label> -->
                                                <tooltip>{tooltip}</tooltip>
                                            </li>
                                        </li>
                                    </settings>
                                </li>
                                
                                <li Class="XmlExtensions.Setting.SplitColumns">
                                    <gapSize>3</gapSize>
                                    <drawLine>false</drawLine>
                                    <splits>
                                        <li>0.11</li>
                                        <li>0.8</li>
                                        <!--As many splits as you want-->
                                    </splits>
                                    <settings>
                                        <!-- mod -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(225,155,155)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Text">
                                                <font>Tiny</font>
                                                <anchor>Left</anchor>
                                                <text>{mod}</text>
                                            </li>
                                        </li>
                                        <!-- description -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(100,100,100)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Text">
                                                <!-- <font>Tiny</font> -->
                                                <text>{description}</text>
                                            </li>
                                        </li>
                                        <!-- default -->
                                        <li>
                                            <li Class="XmlExtensions.Setting.SetColor">
                                                <color>(100,100,100)</color>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Text">
                                                <font>Tiny</font>
                                                <anchor>Right</anchor>
                                                <text>default: {default}</text>
                                            </li>
                                        </li>
                                    </settings>
                                </li>
                                <li Class="XmlExtensions.Setting.SetColor">
                                    <color>(60,60,60)</color>
                                </li>
                                <li Class="XmlExtensions.Setting.GapLine">
                                    <spacing>-6</spacing>
                                </li>
                                <li Class="XmlExtensions.Setting.Gap">
                                    <spacing>12</spacing>
                                </li>
                                <li Class="XmlExtensions.Setting.SetColor">
                                    <color>(255,255,255)</color>
                                </li>
                            </value>
                        </li>
                        <!-- adds the non-active mod to the modlist tab if it isn't already there -->
                        <li Class="PatchOperationConditional">
                            <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="Log"]/settings/li[text="mod: {mod}"]</xpath>
                            <nomatch Class="PatchOperationAdd">
                                <order>Append</order>
                                <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="Log"]/settings</xpath>
                                <value>
                                    <li Class="XmlExtensions.Setting.SetColor">
                                        <color>(155,155,155)</color>
                                    </li>
                                    <li Class="XmlExtensions.Setting.Text">
                                        <font>Tiny</font>
                                        <text>mod: {mod}</text>
                                    </li>
                                    <li Class="XmlExtensions.Setting.SetColor">
                                        <color>(255,255,255)</color>
                                    </li>
                                </value>
                            </nomatch>
                        </li>
                        <!-- modlist-->
                    </operations>
                </nomatch>
            </Operation>
        </apply>
    </XmlExtensions.PatchDef>
</Defs>
