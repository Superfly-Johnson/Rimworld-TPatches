<?xml version="1.0" encoding="utf-8"?>
<Defs>
    <XmlExtensions.PatchDef Name="carnap2TPatchesDuplicateAnimalRemoverDef" Abstract="True">
        <parameters>
            <li>DARMod1</li> <!-- higher priority mod -->
            <li>DARMod2</li> <!-- lower priority mod -->
            <li>DARAnimalDef</li> <!-- defName of animal that will be removed -->
        </parameters>
        <apply>
            <Operation Class="PatchOperationFindMod">
                <mods>
                    <li>{DARMod1}</li>
                </mods>
                <match Class="PatchOperationSequence">
                    <operations>
                        <!-- modname -->
                        <li Class="PatchOperationFindMod">
                            <mods>
                                <li>{DARMod2}</li>
                            </mods>
                            <match Class="PatchOperationSequence">
                                <operations>
                                    <!-- animal -->
                                    <li Class="PatchOperationRemove">
                                        <success>Always</success>
                                        <xpath>/Defs/ThingDef[defName="{DARAnimalDef}"]</xpath>
                                    </li>
                                    <li Class="PatchOperationRemove">
                                        <success>Always</success>
                                        <xpath>/Defs/PawnKindDef[defName="{DARAnimalDef}"]</xpath>
                                    </li>
                                    <li Class="PatchOperationRemove">
                                        <success>Always</success>
                                        <xpath>/Defs/ThingDef[comps/li/hatcherPawn="{DARAnimalDef}"]</xpath>
                                    </li>
                                    <!-- animal end --> 
                                </operations>
                            </match>
                        </li>
                        <!-- modname end -->
                    </operations>
                </match>
            </Operation>
            <Operation Class="PatchOperationAdd">
                <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="Info"]/settings</xpath>
                <order>Append</order>
                <value>
                    <li Class="XmlExtensions.Setting.Text">
                        <font>Tiny</font>
                        <text>DAR: "{DARAnimalDef}" from "{DARMod2}" removed because "{DARMod1}" is loaded.</text>
                    </li>
                </value>
            </Operation>
        </apply>
    </XmlExtensions.PatchDef>
    
</Defs>
