<?xml version="1.0" encoding="utf-8"?>
<Defs>
    <XmlExtensions.PatchDef Name="carnap2TPatchesDuplicateAnimalRemoverDef" Abstract="True">
        <parameters>
            <li>DARMod1</li> <!-- higher priority mod -->
            <li>DARMod2</li> <!-- lower priority mod -->
            <li>DARAnimalDef</li> <!-- defName of animal that will be removed -->
        </parameters>
        <apply>
            <Operation Class="PatchOperationFindMod">
                <mods>
                    <li>{DARMod1}</li>
                </mods>
                <match Class="PatchOperationSequence">
                    <success>Always</success>
                    
                    <operations>
                        <!-- start of operations after detecting the mod -->
                        <!-- tests the operation for logging -->
                        <li Class="PatchOperationTest">
                            <xpath>/Defs/ThingDef[defName="{DARAnimalDef}"]</xpath>
                            <success>Normal</success>
                        </li>
                        <!-- log -->
                        <li Class="PatchOperationAdd">
                            <xpath>/Defs/XmlExtensions.SettingsMenuDef/settings/li/tabs/li[label="Info"]/settings</xpath>
                            <order>Append</order>
                            <value>
                                <li Class="XmlExtensions.Setting.SplitColumn">
                                    <split>0.5</split>
                                    <leftCol>
                                        <li Class="XmlExtensions.Setting.SplitColumn">
                                            <split>0.4</split>
                                            <leftCol>
                                                <li Class="XmlExtensions.Setting.Text">
                                                    <font>Tiny</font>
                                                    <text>Deleted     "{DARAnimalDef}"</text>
                                                </li>
                                            </leftCol>
                                            <rightCol>
                                                <li Class="XmlExtensions.Setting.Text">
                                                    <font>Tiny</font>
                                                    <text>from     "{DARMod2}"</text>
                                                </li>
                                            </rightCol>
                                        </li>
                                    </leftCol>
                                    <rightCol>
                                        <li Class="XmlExtensions.Setting.SplitColumn">
                                            <split>0.8</split>
                                            <leftCol>
                                                <li Class="XmlExtensions.Setting.Text">
                                                    <font>Tiny</font>
                                                    <text>because     "{DARMod1}"</text>
                                                </li>
                                            </leftCol>
                                            <rightCol>
                                                <li Class="XmlExtensions.Setting.Text">
                                                    <font>Tiny</font>
                                                    <text>is loaded.</text>
                                                </li>
                                            </rightCol>
                                        </li>
                                    </rightCol>
                                </li>
                                
                                
                            </value>
                        </li>
                        <!-- tries to remove the animal -->
                        <li Class="PatchOperationRemove">
                            <success>Always</success>
                            <xpath>/Defs/ThingDef[defName="{DARAnimalDef}"]</xpath>
                        </li>
                        <li Class="PatchOperationRemove">
                            <success>Always</success>
                            <xpath>/Defs/PawnKindDef[defName="{DARAnimalDef}"]</xpath>
                        </li>
                        <li Class="PatchOperationRemove">
                            <success>Always</success>
                            <xpath>/Defs/ThingDef[comps/li/hatcherPawn="{DARAnimalDef}"]</xpath>
                        </li>
                        <!-- animal end --> 
                        <!-- modname end -->
                    </operations>
                    <!-- end of operations after detecting mod-->
                </match>
            </Operation>
        </apply>
    </XmlExtensions.PatchDef>
</Defs>
