<?xml version="1.0" encoding="utf-8"?>
<Patch>
    
    <!-- fix factions not showing in create world menu -->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>carnap2.TPatches</modId>
        <key>TPatchesFixSomeModdedFactionsNotShowingUpInCreateWorldMenu</key>
        <defaultValue>true</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationAdd">
                <success>Always</success>
                <xpath>/Defs/FactionDef[defName and not(maxConfigurableAtWorldCreation) and not(hidden="true") and not(isPlayer="true") and(@ParentName="FactionBase" or not(@ParentName))]</xpath>
                <value>
                    <maxConfigurableAtWorldCreation>9999</maxConfigurableAtWorldCreation>
                </value>
            </Operation>
            <Operation Class="PatchOperationFindMod">
                <success>Always</success>
                <mods>
                    <li>The GiantRace</li>
                </mods>
                <match Class="PatchOperationAdd">
                    <xpath>/Defs/FactionDef[(defName="SavageGiants") and not(maxConfigurableAtWorldCreation)]</xpath>
                    <value>
                        <maxConfigurableAtWorldCreation>9999</maxConfigurableAtWorldCreation>
                    </value>
                </match>
            </Operation>
        </caseTrue>
        <caseFalse>
            <!--Patch operations here - not needed-->
        </caseFalse>
    </Operation>
    
    
    
    <!-- HAR research restriction removers -->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>carnap2.TPatches</modId>
        <key>TPatchesHARResearchRestrictionRemover</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/alienRace/raceRestriction/researchList</xpath>
            </Operation>
        </caseTrue>
        <caseFalse>
            <!--Patch operations here-->
        </caseFalse>
    </Operation>
    
    <!-- HAR thoughtsettings removers -->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>carnap2.TPatches</modId>
        <key>TPatchesHARthoughtSettingsRemover</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/alienRace/thoughtSettings</xpath>
            </Operation>
        </caseTrue>
        <caseFalse>
            <!--Patch operations here-->
        </caseFalse>
    </Operation>
    
    
</Patch>
